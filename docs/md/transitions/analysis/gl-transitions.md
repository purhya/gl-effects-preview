# GLTransitions 转场的逆向分析

这里的转场来自于 <https://gl-transitions.com/gallery>, 有许多的不错的创意可以借鉴.

这里的顺序未按照转场分类顺序, 而是网站上的出现排序.

注意这里未包含一些已在 [Video Editor](#transitions/analysis/video-editor) 或者 [Filmora](#transitions/analysis/filmora) 中出现过的类似的转场.


 - `displacement`: 使用一张纹理贴图决定像素在 X 方向的偏移强度.
 - `BowTieVertical, BowTieHerizontal`: 通过两个跟随 progress 变化的起始点的分别指向左右的向量建模, 然后判断点对应的向量和其的点积范围即可. 原始算法的建模不太好.
 - `SimpleZoom`: 原图改变大小 (向量建模) 的同时也改变透明度. 这个实现很简单, 不过看起来效果还不错.
 - `LinearBlur`: 均值模糊, 采样根据 progress 变换半径的周围的 36 个像素然后取均值.
 - `GlitchMemories`: 根据噪声随机偏移.
 - `PolkaDotsCurtain`: 确定所处的圆, 然后根据到圆中心的距离滤波.
 - `StereoViewer`: 原始算法过于复杂, 建议只实现简单的: 一个圆角矩形加一些运动. 为了实现圆角矩形, 我们可以看出如果将它横竖的中间部分移除, 刚好剩下一个圆. 因此可以将坐标在 XY 方向分别建立三个梯度范围, 然后将坐标转为一个圆内的坐标再进行滤波.
 - `Perlin`: 使用二维随机噪声作为渐变蒙版, 我之前猜测可以这么干, 果然已经有人想到了. 不过我们可以自定义这个噪声.
 - `directionalwarp`: 在移动方向的垂直方向上按照 progress 向两边偏离像素.
 - `Bounce`: 跳动函数加一个滤波形成的阴影. 这个还是挺有趣的.
 - `ColourDistance`: 对比 progress 和前后的颜色在 RGB 空间的距离, 当 progress 超过这个距离时会完全显示新图. 另外这里加了个修正来保证 progress 接近 1 时的变化加快. 这个算法可以微调并加入适当的平滑.
 - `CircleCrop`: 比较简单并且有趣的一个效果, 可以根据中点为圆心的圆形进行滤波.
 - `Dreamy`: 振幅以及初相随着 progress 变化的弦波进行 Y 扰动.
 - `GridFlip`: 随机生成当前所在块的翻转时间点.
 - `crosshetch`: 先看一个方向: 条纹逐渐从 x = 0.5 的位置发出, 并且速度相同, 所以在做镜像处理后, 半条就变成了一个条纹从一侧出来逐渐填满屏幕的过程, 此时用随机数生成初始条纹位移, 然后跟随 progress 移动即可.
 - `windowblinds`: 参考已有的 `Stride-Merge`. 另外这个效果有两个透明度交叠渐变的过程.
 - `hexagonalize`: 我们首先确定一个中心坐标不变的 6 边形, 例如正中心, 然后找寻当前坐标所在的 6 边形的中心坐标. 为此我们将所有 6 边形的中心坐标相连, 形成一个正三角形网络. 然后将不动点到当前点的向量, 拆分为 a \* e^π/3i + b \* e^0 的形式, 然后将 a, b 按照 round 方式取整, 即可以得到最近的正 6 边形中心坐标. 而且这里还可以根据 a, b 的小数部分在 0.5 附近进行滤波来平滑边缘.
 - `GlitchDisplace`: 基本的原理也是根据像素值进行采样偏移, 由于效果看起来不太好未做细致研究.
 - `DreamyZoom`: 旋转和中间位置混合白色.
 - `DoomScreenTransition`: 参考 `Wind`, 一个不同之处是这里对新图做初始的随机位移, 并且这些位移最终共同归 0.
 - `ripple`: 半径按照正弦波进行偏移.
 - `Burn`: 中间位置混合颜色 vec3(0.9, 0.4, 0.2).
 - `colorphase`: RGB 三通道从原图过渡到新图的时间轴不同, 先红, 其次绿, 再蓝. 请参考代码.
 - `grayscale`: 越靠近中间, 越高的比例混合 RGB 值生成的灰色. 原始算法使用的 G 比例比较高, 这是为了突出绿色, 建议这里使用标准的灰度转换函数.
 - `multiply_blend`: 在中间使用 multiple 的方式混合两个颜色, 这会让中间部分呈现两个图片的暗区交叠.
 - `randomsquares`: 矩形块的起始变化时间点根据随机数生成.
 - `rotate_scale_fade`: 旋转, 缩放的同时进行透明度渐变, 这个效果不是特别好.
 - `squareswire`: 矩形块半径根据向量建模, 然后根据矩形块的尺寸进行滤波.
 - `squeeze`: 原图向中间缩放的同时进行了一个固定的 RGB 通道的采样偏移.