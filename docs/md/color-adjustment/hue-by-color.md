# 色相 (Hue) - 针对颜色调整


### 预览

<color-correction-preview-for-channel .name="hue-by-color"></color-correction-preview-for-channel>


### 算法简介

色相的改变基于 HSL 颜色空间, 请参考 <https://en.wikipedia.org/wiki/HSL_and_HSV>.

整体调整色相会让照片变得非常糟糕, 所以建议使用这个来自于友商的方案, 只针对某个颜色调整色相.

具体的算法是将百分比映射到 -1~1 (-60°~60°), 通过色相偏移得到一个新的颜色, 然后计算像素颜色和所选颜色在 HSL 颜色空间内的距离, 如果在指定的范围内 (目前定为 0.5), 则使用新的颜色.

色相调整被限制为 (-60°~60°), 这个范围可以将红色调整到紫色或者橙色, 这样可以避免调整出非常难看的颜色.

以上的算法会因为只调整部分颜色而产生额外的梯度, 从而在调整颜色的区域产生色块, 通过原始颜色和新的颜色根据在 HSL 颜色空间内的距离进行线性插值可以大大减轻这种问题.


### 扩展

1. 我们可以通过更改颜色匹配范围 (目前 0.5) 来扩大或者缩小可调整的颜色.
2. 我们可以进一步细化可调整的颜色和手动指定颜色.
3. 我们可以根据照片的颜色分布来生成待调整的颜色.
4. 我们可以在照片上动态圈出目前会被调整的范围, 这对于我们的交互设计以及可视化的能力提出了一些挑战.
