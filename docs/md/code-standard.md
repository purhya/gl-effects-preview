# GLSL 代码规范推荐

这只是一个推荐规范, 其目的是方便大家有一个共通的代码规范, 从而对于代码有相同的格式和结构预期.


### 格式

使用 *制表符* 做严格缩进.

每一行末尾不要有多余的空白字符.

如果逗号后面还有内容的话, 逗号后面应该有个空格.

使用空行分隔内容块, 一般最外层的内容块或者两个大的内容块分隔使用两个空行, 而内层块或者相邻的小块分隔使用一个空行. 但是也不要随意添加空行.

清除无用或者不会执行的代码, 防止它干扰主要的代码要传达的信息.


### 变量命名

变量的命名请不要使用数学符号, 而使用具体的英语含义, 并且能够和当前的上下文关联. 大家都知道的数学符号除外.

如果有多个类似的变量, 应该在命名中强调他们的区别, 谨慎使用 `v1, v2, v3`, 除非你确保别人能立即明白这些变量的含义.


### 变量前缀

如果某个变量是某一功能类别着色器通用的变量, 例如分辨率, 顶点坐标这些, 则建议为其添加前缀, 这样可以将其和其他专用变量作区分.

 - `iXXX`: 如果变量是顶点和片元着色器通用的 uniform 变量.
 - `vXXX`: 如果变量是顶点着色器专用的输入变量.
 - `fXXX`: 如果变量是片元着色器专用的插值变量.
 

### 注释

由于 GLSL 会牵扯大量的数学运算, 变量名称所能够传达的语义已经不够. 所以推荐为所有的不能被理解理解的代码都添加上注释.

注释语言应该选择大家共有的语言, 即中文. 除非项目组英文都很好.

注释的目的是帮助别人, 或者是一段时间之后的自己理解代码的意图. 如果必要的话, 再备注更多细节.

十分推荐使用范例的方式来进行注释. 函数往往是难于直接理解的, 我们可以简单备注它通过哪些点, 以及变化趋势, 比如希望在快结束时变化慢一些.

注释应当传达代码所不能直接传达的信息, 例如代码是 `a * b`, 注释不应该是 `计算 a + b 的值` 这么显而易见的东西.

注释应当使用大家共有的词汇, 不要使用难懂的专业术语. 如果必须要用的话, 先普及这些术语.



### 重用和重复性

应当尽最大可能避免重复性代码, 请将所以基于一个模型能够处理的所有效果使用一个 shader, 不同参数的实现.

如果效果类似但是确实需要创建多个 shader, 请优先选择 `#include` 的方式来共享代码.

`#import` 库文件的创建请移动要保持克制, 确保它通用并且和具体项目无关, 并且确保其中的代码是所有人都可以使用的, 而不是私用的.



### 投入

你需要知道你写的代码不是那种编写一次, 之后自己都再难以看到的前端代码.

你编写的代码非常重要, 里面的每一行都浓缩了大量的信息, 而且以后还会被人裱起来贴在墙上, 供很多人参考和分析.

所以一定请好好对待自己的代码.