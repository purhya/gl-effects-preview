# 模糊 (Blur)

### 参考

<http://blog.ivank.net/fastest-gaussian-blur.html>


### 算法备注

 1. 将模糊拆分为多个半径的均值模糊, 这些半径的平方和等于原始的模糊半径.
 2. 从 x 方向上逐行按照半径进行均值模糊. 移位时可以从像素值之和减去移出的像素, 加上移入的像素. 因此该算法与模糊半径无关.
 3. 再从 y 方向上逐列按照半径进行均值模糊.
 4. 按照半径迭代步骤 2 和 3, 3 次迭代之后效果即和高斯模糊非常接近, 一般误差不超过 0.1%.


### 着色器的实现

着色器实现的原理基本和上面的类似, 但是为了效率考虑需要减少采样数, 如果半径过大会跳过一些像素采样; 以及减少迭代次数, 一般只进行两次.


### 1维高斯模糊权重生成器

这里会根据半径生成一组 1 维的高斯模糊权重, 用于进行高斯模糊的计算.

例如选择半径为 8, 会生成 9 个权重值, 因此可以前后共采样 9 个点并按照此权重混合.

<gauss-blur-1d-generator></gauss-blur-1d-generator>


### 2维高斯模糊权重生成器

这里会根据半径生成一组 2 维的高斯模糊权重, 用于进行高斯模糊的计算.

例如选择半径为 4, 会生成 25 个权重值, 因此可以在范围内共采样 25 个点并按照此权重混合.

<gauss-blur-2d-generator></gauss-blur-2d-generator>